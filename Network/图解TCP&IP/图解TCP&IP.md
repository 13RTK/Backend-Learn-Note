# 一、TCP/IP基础



## 1. TCP/IP标准化







### 1) TCP/IP具体含义

> 利用IP进行通信时用到的协议群的统称



![IMG_C94CAA28F9FA-1](图解TCP&IP.assets/IMG_C94CAA28F9FA-1.jpeg)

<hr>







### 2) RFC获取

- TCP/IP协议中需要标准化的，被列入到了RFC文档中(Request For Comment)



获取RFC文档:

[» RFC Editor (rfc-editor.org)](https://www.rfc-editor.org/)

[Index of /rfc (rfc-editor.org)](https://www.rfc-editor.org/rfc/)

<hr>







## 2. TCP/IP协议分层模型





### 1. 物理层

- 即负责数据传输的硬件

<hr>





### 2. 网络接口层(数据链路层)

- 负责让硬件起作用

<hr>







### 3. 互联网层(网络层)

- 网络层使用IP协议，IP协议基于IP地址转发分组的数据

> 网络层和传输层的功能一般由操作系统提供，比如路由器，其必须实现通过网络层转发分组数据的功能
>
> 连接互联网的所有主机/路由器都必须实现IP的功能





#### IP

- IP在跨越网络传送数据包时，使用IP地址作为主机的标识
- IP还隐含数据链路层的功能，通过IP，互相通信的主机无论经过怎样的数据链路底层，都能实现通信

> IP协议不具备重发机制，属于非可靠传输协议





#### ICMP

- 当IP数据包在发送途中一旦发生异常无法正常到达，则需要会给发送端发送一个正常的通知

> 有时也被用来诊断网络的健康状况





#### ARP

- 从数据包的IP地址中解析出MAC地址

<hr>











### 4. 传输层

功能:

- 让应用程序之间能够通信，识别应用程序的是端口号







#### TCP

- 面向有连接的传输层协议
- TCP可以正确处理传输过程中的丢包、传输顺序乱掉等异常情况，还能利用带宽缓解网络拥堵
- TCP为了建立连接，需要多次进行数据包的收发

> TCP不适用于对时效性要求高的应用







#### UDP

- UDP是一种面向无连接的传输层协议

> UDP常用于多媒体领域

<hr>











### 5. 应用层

- 会话层、表示层和应用层的功能都集中在应用程序中



#### WWW

协议: HTTP(应用层协议)

数据格式: HTML





#### 电子邮件

协议: SMTP(simple mail transfer protocol)

数据格式: 文本(以前)，MIME协议拓展: 声音、图像等信息



MIME(表示层协议)









#### 文件传输(FTP)

- FTP进行文件传输时，会建立两个TCP连接(发送传输请求时用的控制连接，实际传输数据的数据连接)







#### 远程登录(TELNET/SSH)

- TCP/IP中远程登录常用TELNET和SSH协议









#### 网络管理(SNMP)

在TCP/IP中进行网络管理时，采用SNMP(simple network management protocol)

<hr>











## 3. TCP/IP分层模型和示例





### 1) 数据包首部

![IMG_323DEFAFE1B0-1](图解TCP&IP.assets/IMG_323DEFAFE1B0-1.jpeg)



Terminology:

- 帧: 表示**数据链路层**中，**包的单位**
- 数据包: **网络层以上层级中**，包的单位
- 段: TCP数据流中的信息
- 消息: 应用协议中数据的单位

<hr>









### 2) 经过数据链路的包

- 每个包首部中至少包含两个信息: 
    - 发送端和接收端的地址
    - 上一层的协议类型

<hr>









### 3) 数据包接收处理

接收流程是发送流程的逆序过程



1. 数据链路层(网络接口层)

从包首部中找到MAC地址判断是否是给自己的包，不是则丢弃

如果是，则查看类型域，确定数据类型(IP、ARP协议)





2. 网络层IP

判断包首部的IP地址是否与自己的匹配，是则接收数据并查找上一层

如果不是，则需要借助路由控制表查询应该转发的路径后，再进行转发





3. 传输层TCP
    - 首先计算一下检验和，判读数据是否被破坏
    - 然后检查是否按照序号接收数据
    - 最后检查端口号，确定具体的应用程序
    - 接收端会发送一个确认回执给给发送端





4. 应用程序处理

<hr>








































